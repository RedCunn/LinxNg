<!-- Main modal -->
@if(isOpen()){
<div class="modalcard">
    <div id="modalBackground" class="modalbg"></div>
    <!-- Modal content -->
    <div id="modalchain" tabindex="-1" aria-hidden="true" class="modalcontainer">
        <!-- Modal header -->
        <div class="modalheader">
            <div class="col-span-3 flex align-middle justify-between mt-5">
                <div class="w-1/5 flex text-center items-center justify-start">
                    <img src="../../../assets/imgs/logos/mychainicon.png"
                        style="width: 40px ; height: auto;opacity: 80%; margin-left: 1rem;">
                </div>
                <div class="w-1/5 flex justify-end items-start">
                    <button type="button"
                        class="bg-transparent hover:text-white rounded-lg ms-auto me-3 inline-flex justify-center items-center "
                        (click)="closeModal()">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
            </div>
            <div class="col-span-3 flex align-middle justify-center">
                <div class="searchdiv">
                    @if(showSearchBar()){
                        <div class="searchbardiv">
                            <input (input)="searchChain($event)" type="search" id="default-search"
                                class="block w-3/5 p-2 ps-10 text-sm text-gray-900 border border-purple-500 rounded-lg bg-violet-300 focus:ring-purple-700 focus:border-purple-700 "
                                placeholder="Buscar cadena..." />
                            <button type="button" class="closesearchbutt" (click)="showSearchBar.set(false)">
                                <span class="material-symbols-outlined">
                                    close_small
                                </span>
                            </button>
                        </div>
                    }@else {
                        <div class="searchicon">
                            <button type="button" class="searchbutt" (click)="showSearchBar.set(true)">
                                <span class="material-symbols-outlined">
                                    search
                                </span>
                            </button>
                        </div>
                    }
                </div>
            </div>
        </div>
        <!-- Modal body -->
        <div class="modalbody">
            <div class="chainlistdiv">
                <ul class="chainslist">
                    @for(chain of this.searchedChains(); track chain.chainid){
                        <li>
                            <button (click)="this.showLinxsOnChain(chain.chainid)" [class.chainbuttInactive]="isActive(chain.chainid) ? false : true" [class.chainbuttActive]="isActive(chain.chainid) ? true : false">
                                <div class="text-center w-8 text-xl">
                                    <span class="iconhover">
                                        ðŸ”—
                                    </span>
                                </div>
                                @if(isAdmin(chain.chainid)){
                                <span class="material-symbols-outlined">
                                    shield_person
                                </span>
                                }
                                <p class="text-start w-fit">
                                    {{chain.chainname}}
                                </p>
                            </button>
                        </li>
                    }@empty{
                        <li>
                            <p style="font-style: italic;">No hay cadenas...</p>
                        </li>
                    }
                </ul>
            </div>
            <div class="modalfooter">
                <button class="newChainButt" type="button" (click)="openContactsListModal()">
                    <span class="material-symbols-outlined">
                        add
                    </span>
                    <span class="material-symbols-outlined addlink">
                        link
                    </span>
                </button>
            </div>
        </div>
    </div>
</div>
}

<app-linxsonchain [chain]="this.chain" [isOpen]="this.linxsOnChainOpen"
    [chainName]="this.chainName" [chainId]="this.chainId" [groupChat]="this.groupChats"></app-linxsonchain>
<app-pickcontactsmodal [isOpen]="contactsOpen"></app-pickcontactsmodal>