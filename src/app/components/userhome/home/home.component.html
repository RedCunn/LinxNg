<div class="homecontainer">
  <div class="usernamearea">
      @if(isUser() && !isCandidate()){
      <p>{{ userdata?.account?.linxname }}</p>
      }@else {
      <p>{{isCandidate() ? candidateData.account!.linxname : linxdata!.linxname }}
        @if(isCandidate()){<a class="text-yellow-500 hover:text-yellow-600"><span
            class="material-symbols-outlined">flag</span></a>}
      </p>
      }
      @if(!this.isCandidate() && !isUser()){
      <button (click)="toggleChatModal()" class="ms-3 text-blue-300 hover:text-blue-500 pt-3">
        <span class="material-symbols-outlined">
          chat_bubble
        </span>
      </button>
      }
  </div>
  <div class="leftaside">
    @if (this.isUser()) {
      <app-adminaside></app-adminaside>
    }
    @if(this.isCandidate()){
      <app-candidatedata></app-candidatedata>
    }
  </div>
  <div class="centralcontent">
    <div class="chainsarea">
      @if(this.isUser()){
        <button (click)="toggleChainModal()">
          <div class="eslabon">
            <img style="width: 80px;" src="../../../../assets/imgs/logos/eslabon6.png">
          </div>
          <p>CADENAS</p>
          <div class="eslabon">
            <img style="width: 80px; margin-left: 10px;" src="../../../../assets/imgs/logos/eslabon6.png">
          </div>
        </button>
      }
    </div>
    <div class="articlesarea">
  
      @if(this.loadingArts()){
      <article role="status" class="animate-pulse">
        <div class="animateload"></div>
        <div class="animateload"></div>
        <div class="animateload"></div>
        <div class="animateload w-2/3"></div>
      </article>
      <article role="status" class="animate-pulse">
        <div class="animateload"></div>
        <div class="animateload"></div>
        <div class="animateload"></div>
        <div class="animateload w-2/3"></div>
      </article>
      <article role="status" class="animate-pulse">
        <div class="animateload"></div>
        <div class="animateload"></div>
        <div class="animateload"></div>
        <div class="animateload w-2/3"></div>
      </article>
      <article role="status" class="animate-pulse">
        <div class="animateload"></div>
        <div class="animateload"></div>
        <div class="animateload"></div>
        <div class="animateload w-2/3"></div>
      </article>
      }@else {
  
          @for(art of this.articles; track $index){
          <article>
            <button type="button" [disabled]="!isUser()" (click)="toggleArtFormModal(art)" [class.editart]="isUser()">
              <h1 class="break-words">{{art.title}}</h1>
            </button>
            <p style="color: gray;"><small>{{this.formatDate(art.postedOn)}}</small></p>
            <p class="artbody">{{art.body}}</p>
            <div class="artimg">
              @if(art.img && art.img !== ''){
              <img [src]="'http://localhost:3000/api/Account/uploads/'+art.img"
                (error)="loadingArts.set(true)">
              }
            </div>
          </article>
          }@empty{
            @if(isUser()){
            <article>
              <h1>Escribe tu primer art√≠culo</h1>
              <p style="color: gray;"><small>{{this.currentDate.toLocaleString()}}</small></p>
              <p>Escribe algo para que lxs dem√°s sepan qui√©n eres...qu√© est√°s buscando... o en qu√© piensas üëæ</p>
              <div class="flex justify-end">
                <button type="button" (click)="toggleArtFormModal(null)"
                  class=" hover:text-orange-600 flex flex-row p-3 rounded-lg">
                  <span class="material-symbols-outlined">
                    edit
                  </span>
                </button>
              </div>
            </article>
            }@else {
            <div class="noarticles">
              <span><img src="../../../../assets/imgs/bacteria/racimo_violeta.png" alt=""></span>
            </div>
            }
          }
      }
    </div>
  </div>
  <div class="functionsaside">
    @if(!this.isCandidate()){
      <app-homeaside [openArtModal]="isArtFormOpen"></app-homeaside>
    }
  </div>
</div>

<app-articleform [isOpen]="isArtFormOpen" [article]="this.article" [articles]="articles"
  [userdata]="userdata"></app-articleform>

<ng-container #chatcompoContainer></ng-container>


